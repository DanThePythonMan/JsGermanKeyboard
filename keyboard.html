<!DOCTYPE html>
<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous">
  <title>Keyboard</title>
  <link href="style.css" rel="stylesheet">
</head>
<body class="bg-dark">
  <div id="titleContainer">
    <ul class="text-light"><h3>German Keyboard</h3></ul>
  </div>
  <div id="textContainer">
    <textarea type="text" name="textBox" id="textBox"
      class="textBox bg-secondary text-light" s></textarea>
  </div>
  <table class="table-dark">

    <tr>
      <td><button onclick="addChar('Ä')"
          class="btn btn-secondary">Ä</button></td>

      <td><button onclick="addChar('Ö')"
          class="btn btn-secondary">Ö</button></td>
      <td><button onclick="addChar('Ü')"
          class="btn btn-secondary">Ü</button></td>
      <td><button onclick="addChar('ẞ')"
          class="btn btn-secondary">ẞ</button></td>
    </tr>
    <tr>
      <td><button onclick="addChar('ä')"
          class="btn btn-secondary">ä</button></td>
      <td><button onclick="addChar('ö')"
          class="btn btn-secondary">ö</button></td>
      <td><button onclick="addChar('ü')"
          class="btn btn-secondary">ü</button></td>
      <td><button onclick="addChar('ß')"
          class="btn btn-secondary">ß</button></td>
    </tr>
  </table>
  <a href="https://github.com/DanThePythonMan/JsGermanKeyboard">
    <img class="logo" src="assets/Logo.png"
      alt="made by DanThePythonMan at https://github.com/DanThePythonMan" />
  </a>
  <script>

    let elem = document.getElementById("textBox")

        elem.addEventListener("keydown", function (event){
            
            if (event.key == "="){
              if (handleKeyPress()){
                event.preventDefault()
              }
            
            }

        })

        function addChar(char){
          elem.value = elem.value + char;
        }

        function getCursorPosition() {
    return elem.selectionStart;
}

          function handleKeyPress(){
          
          let cursorPos = getCursorPosition();
          let string = elem.value;
          let char = string[cursorPos-1]
          
          let updatedChar = "";

    
    switch (char) {
      case "a":
        updatedChar = "ä";
        break;
      case "o":
        updatedChar = "ö";
        break;
      case "u": 
        updatedChar = "ü";
        break;
      case "s":
        updatedChar = "ß";
        break;
      case "A":
        updatedChar = "Ä";
        break;
      case "O":
        updatedChar = "Ö";
        break;
      case "U":
        updatedChar = "Ü";
        break;
      case "S":
        updatedChar = "ß";
        break;
      default:
        return false;
    }

      
      let workingStr = string.substring(0, cursorPos - 1) + updatedChar + string.substring(cursorPos);
      elem.value = workingStr
      return true
        }
      
        function copy(){
          navigator.clipboard.writeText(elem.value)
        }

        elem.addEventListener("keydown", function (event){
          if (event.key == "-" && event.ctrlKey){
            
            event.preventDefault()
            copy()
          }
        })

    </script>

</body>